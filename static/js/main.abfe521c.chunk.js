(this["webpackJsonpvoltorb-flip-demo"]=this["webpackJsonpvoltorb-flip-demo"]||[]).push([[0],{150:function(e,t,n){},331:function(e,t,n){},332:function(e,t,n){"use strict";n.r(t);var r,i=n(0),l=n.n(i),c=n(14),o=n.n(c),u=(n(150),n(28)),s=n(349),a=n(81),d=n.n(a),f=n(136),v=n.n(f),h=n(79),j=n(37),b=n(39),p=function(e,t){return new Array(t).fill(e)},g=function(e,t,n,r){var i=e*e-(t+n+r);return[].concat(Object(b.a)(p(0,t)),Object(b.a)(p(1,i)),Object(b.a)(p(2,n)),Object(b.a)(p(3,r)))},O=[{level:1,size:5,cellsOptions:[g(5,6,3,1),g(5,6,0,3),g(5,6,5,0),g(5,6,2,2),g(5,6,4,1)]},{level:2,size:5,cellsOptions:[g(5,7,1,3),g(5,7,6,0),g(5,7,3,2),g(5,7,0,4),g(5,7,5,1)]},{level:3,size:5,cellsOptions:[g(5,8,2,3),g(5,8,7,0),g(5,8,4,2),g(5,8,1,4),g(5,8,6,1)]},{level:4,size:5,cellsOptions:[g(5,8,3,3),g(5,8,0,5),g(5,10,8,0),g(5,10,5,2),g(5,10,2,4)]},{level:5,size:5,cellsOptions:[g(5,10,7,1),g(5,10,4,3),g(5,10,1,5),g(5,10,9,0),g(5,10,6,2)]},{level:6,size:5,cellsOptions:[g(5,10,3,4),g(5,10,0,6),g(5,10,8,1),g(5,10,5,3),g(5,10,2,5)]},{level:7,size:5,cellsOptions:[g(5,10,7,2),g(5,10,4,4),g(5,13,1,6),g(5,13,9,1),g(5,10,6,3)]},{level:8,size:5,cellsOptions:[g(5,10,0,7),g(5,10,8,2),g(5,10,5,4),g(5,10,2,6),g(5,10,7,3)]}];!function(e){e[e.Pending=0]="Pending",e[e.Won=1]="Won",e[e.Lost=2]="Lost"}(r||(r={}));var m=function(){function e(t){Object(h.a)(this,e),this.grid=void 0,this.grid=t}return Object(j.a)(e,[{key:"size",value:function(){return this.grid.length}},{key:"getState",value:function(){var e=this.grid.flatMap((function(e){return e}));return e.some((function(e){return 0===e.value&&e.flipped}))?r.Lost:e.filter((function(e){return e.value>1})).every((function(e){return e.flipped}))?r.Won:r.Pending}},{key:"getCell",value:function(e,t){return this.grid[e][t]}},{key:"getRow",value:function(e){return this.grid[e]}},{key:"getRowTotal",value:function(e){return this.getRow(e).map((function(e){return e.value})).reduce((function(e,t){return e+t}))}},{key:"getCol",value:function(e){return this.grid.map((function(t){return t[e]}))}},{key:"getColTotal",value:function(e){return this.getCol(e).map((function(e){return e.value})).reduce((function(e,t){return e+t}))}},{key:"countVoltorbsInRow",value:function(e){return this.grid[e].filter((function(e){return 0===e.value})).length}},{key:"countVoltorbsInCol",value:function(e){return this.grid.map((function(t){return t[e]})).map((function(e){return e.value})).filter((function(e){return 0===e})).length}},{key:"rowIsDead",value:function(e){return this.cellsAreDead(this.grid[e])}},{key:"colIsDead",value:function(e){return this.cellsAreDead(this.grid.map((function(t){return t[e]})))}},{key:"cellsAreDead",value:function(e){return e.filter((function(e){return 0===e.value})).length+e.map((function(e){return e.value})).reduce((function(e,t){return e+t}))-5<=e.filter((function(e){return 2===e.value&&e.flipped})).length+2*e.filter((function(e){return 3===e.value&&e.flipped})).length}},{key:"getScore",value:function(){var e=this.grid.flatMap((function(e){return e})).filter((function(e){return e.flipped}));return e.length<=0?0:e.map((function(e){return e.value})).reduce((function(e,t){return e*t}))}},{key:"getNumberOfFlippedMultipliers",value:function(){return this.grid.flatMap((function(e){return e})).filter((function(e){return e.value>0&&e.flipped})).length}}],[{key:"create",value:function(t){var n=[],r=O.find((function(e){return e.level===t})),i=k(r.cellsOptions);y(i);for(var l=0;l<r.size;l++){for(var c=[],o=0;o<r.size;o++){var u=i[l*r.size+o];c.push(new x(u))}n.push(c)}return new e(n)}}]),e}(),x=function(){function e(t){Object(h.a)(this,e),this.value=void 0,this.flipped=void 0,this.value=t,this.flipped=!1}return Object(j.a)(e,[{key:"flip",value:function(){this.flipped=!0}}]),e}(),k=function(e){return e[Math.floor(Math.random()*e.length)]},y=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=[e[n],e[t]];e[t]=r[0],e[n]=r[1]}},w=n(1),S=function(e){var t=e.cell,n="flip-grid-cell",i=Object(w.jsx)("span",{children:"?"}),l="cell-button",c="/voltorb-flip-demo/voltorb.png";return e.showDead&&(n+=" dead"),e.gridState!==r.Pending&&(i=Object(w.jsx)("span",{children:t.value}),l+=" shown",0===t.value&&(i=Object(w.jsx)("img",{src:c,alt:"voltorb"}),l+=" voltorb")),t.flipped&&(i=Object(w.jsx)("span",{children:t.value}),l+=" flipped",0===t.value&&(i=Object(w.jsx)("img",{src:c,alt:"voltorb"}),l+=" voltorb")),Object(w.jsx)("div",{className:n,children:Object(w.jsx)("div",{className:l,onClick:e.flipCell,children:i})})},C=function(e){var t=e.cells.map((function(e){return e.value})).reduce((function(e,t){return e+t})),n=e.cells.filter((function(e){return 0===e.value})).length;return Object(w.jsx)("div",{className:"flip-grid-cell",children:Object(w.jsx)("div",{className:"stats",children:Object(w.jsxs)("div",{children:[t,", ",n]})})})},z=function(e){var t,n=Object(i.useState)(!1),l=Object(u.a)(n,2),c=l[0],o=l[1],a=function(t,n,r){var i=t.getCell(n,r),l=t.getState(),o=!i.flipped&&c&&(t.rowIsDead(n)||t.colIsDead(r));return Object(w.jsx)(S,{cell:i,gridState:l,showDead:o,flipCell:function(){return e.flipCell(n,r)}})};return Object(w.jsxs)("div",{className:"container",children:[(t=e.grid,Object(w.jsxs)("div",{children:[M(t.size()).map((function(e){return Object(w.jsxs)("div",{className:"flip-grid-row",children:[M(t.size()).map((function(n){return a(t,e,n)})),Object(w.jsx)(C,{cells:t.getRow(e)})]})})),Object(w.jsx)("div",{className:"flip-grid-row",children:M(t.size()).map((function(e){return Object(w.jsx)(C,{cells:t.getCol(e)})}))})]})),function(t){var n;return Object(w.jsxs)("div",{className:"grid-state",children:[Object(w.jsxs)("div",{style:{textAlign:"start"},children:[Object(w.jsxs)("div",{children:["Level: ",e.level]}),Object(w.jsxs)("div",{children:["Streak: ",e.streak]})]}),Object(w.jsxs)("div",{style:{textAlign:"end"},children:[Object(w.jsxs)("div",{children:["Coins: ",e.score]}),Object(w.jsxs)("div",{children:["Coins this round: ",null!==(n=null===t||void 0===t?void 0:t.getScore())&&void 0!==n?n:0]})]})]})}(e.grid),function(t){var n=null===t||void 0===t?void 0:t.getState();return Object(w.jsxs)("div",{className:"grid-options",children:[Object(w.jsx)(s.a,{content:"Move to the next level!",position:"bottom left",mouseEnterDelay:500,disabled:n===r.Pending,trigger:Object(w.jsx)(d.a,{disabled:n===r.Pending,onClick:function(){return e.nextLevel(t)},children:"Next Level"})}),Object(w.jsx)(s.a,{content:"Start a new game from level 1.",position:"bottom center",mouseEnterDelay:500,trigger:Object(w.jsx)(d.a,{onClick:e.reset,children:"Reset"})}),Object(w.jsx)(s.a,{content:"Highlight cells that MUST contain either 1 coin or a Voltorb, based on current information.",position:"bottom right",mouseEnterDelay:500,trigger:Object(w.jsx)(v.a,{className:"option-checkbox",label:"Show dead cells",checked:c,onChange:function(e,t){var n;return o(null!==(n=t.checked)&&void 0!==n&&n)}})})]})}(e.grid)]})},M=function(e){return Array.from(new Array(e),(function(e,t){return t}))},N=(n(331),function(e){return m.create(e)}),D=function(){var e=Object(i.useState)(1),t=Object(u.a)(e,2),n=t[0],l=t[1],c=Object(i.useState)(0),o=Object(u.a)(c,2),s=o[0],a=o[1],d=Object(i.useState)(0),f=Object(u.a)(d,2),v=f[0],h=f[1],j=Object(i.useState)(N(n)),b=Object(u.a)(j,2),p=b[0],g=b[1];return Object(w.jsxs)("div",{className:"App",children:[Object(w.jsxs)("header",{className:"App-header",children:[Object(w.jsx)("h1",{children:"Voltorb Flip"}),Object(w.jsx)("h4",{children:"A clone of the beloved mini-game from Pok\xe9mon HeartGold and SoulSilver."}),Object(w.jsx)(z,{level:n,streak:v,score:s,grid:p,flipCell:function(e,t){p.getCell(e,t).flip(),g(new m(p.grid))},nextLevel:function(e){var t=n,i=0,c=e.getState();if(c===r.Won&&(t=(i=v+1)>=5?8:Math.min(8,n+1),a(s+e.getScore())),c===r.Lost){var o=e.getNumberOfFlippedMultipliers();o<n&&(t=Math.max(1,Math.min(8,n,o)))}l(t),h(i),g(N(t))},reset:function(){l(1),h(0),g(N(1))}})]}),Object(w.jsx)("footer",{children:Object(w.jsx)("a",{href:"https://www.icons101.com/icon/id_60093/setid_928/Pokemon_by_HEKTakun/100_Voltorb",title:"voltorb icon",children:"Voltorb icon created by HEKTakun - Icons101"})})]})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,350)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,l=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),l(e),c(e)}))};o.a.render(Object(w.jsx)(l.a.StrictMode,{children:Object(w.jsx)(D,{})}),document.getElementById("root")),A()}},[[332,1,2]]]);
//# sourceMappingURL=main.abfe521c.chunk.js.map