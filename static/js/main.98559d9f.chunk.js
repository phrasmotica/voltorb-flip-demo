(this["webpackJsonpvoltorb-flip-demo"]=this["webpackJsonpvoltorb-flip-demo"]||[]).push([[0],{218:function(e,t,n){},399:function(e,t,n){},400:function(e,t,n){"use strict";n.r(t);var r,i=n(0),l=n.n(i),c=n(28),o=n.n(c),u=(n(218),n(56)),a=n(415),s=n(139),d=n.n(s),f=n(202),v=n.n(f),h=n(416),j=n(137),p=n(75),g=n(78),b=function(e,t){return new Array(t).fill(e)},O=function(e,t,n,r){var i=e*e-(t+n+r);return[].concat(Object(g.a)(b(0,t)),Object(g.a)(b(1,i)),Object(g.a)(b(2,n)),Object(g.a)(b(3,r)))},m=[{level:1,size:5,cellsOptions:[O(5,6,3,1),O(5,6,0,3),O(5,6,5,0),O(5,6,2,2),O(5,6,4,1)]},{level:2,size:5,cellsOptions:[O(5,7,1,3),O(5,7,6,0),O(5,7,3,2),O(5,7,0,4),O(5,7,5,1)]},{level:3,size:5,cellsOptions:[O(5,8,2,3),O(5,8,7,0),O(5,8,4,2),O(5,8,1,4),O(5,8,6,1)]},{level:4,size:5,cellsOptions:[O(5,8,3,3),O(5,8,0,5),O(5,10,8,0),O(5,10,5,2),O(5,10,2,4)]},{level:5,size:5,cellsOptions:[O(5,10,7,1),O(5,10,4,3),O(5,10,1,5),O(5,10,9,0),O(5,10,6,2)]},{level:6,size:5,cellsOptions:[O(5,10,3,4),O(5,10,0,6),O(5,10,8,1),O(5,10,5,3),O(5,10,2,5)]},{level:7,size:5,cellsOptions:[O(5,10,7,2),O(5,10,4,4),O(5,13,1,6),O(5,13,9,1),O(5,10,6,3)]},{level:8,size:5,cellsOptions:[O(5,10,0,7),O(5,10,8,2),O(5,10,5,4),O(5,10,2,6),O(5,10,7,3)]}];!function(e){e[e.Pending=0]="Pending",e[e.Won=1]="Won",e[e.Lost=2]="Lost"}(r||(r={}));var x=function(){function e(t){Object(j.a)(this,e),this.grid=void 0,this.grid=t}return Object(p.a)(e,[{key:"size",value:function(){return this.grid.length}},{key:"getState",value:function(){var e=this.grid.flatMap((function(e){return e}));return e.some((function(e){return 0===e.value&&e.flipped}))?r.Lost:e.filter((function(e){return e.value>1})).every((function(e){return e.flipped}))?r.Won:r.Pending}},{key:"getCell",value:function(e,t){return this.grid[e][t]}},{key:"getRow",value:function(e){return this.grid[e]}},{key:"getRowTotal",value:function(e){return this.getRow(e).map((function(e){return e.value})).reduce((function(e,t){return e+t}))}},{key:"getCol",value:function(e){return this.grid.map((function(t){return t[e]}))}},{key:"getColTotal",value:function(e){return this.getCol(e).map((function(e){return e.value})).reduce((function(e,t){return e+t}))}},{key:"countVoltorbsInRow",value:function(e){return this.grid[e].filter((function(e){return 0===e.value})).length}},{key:"countVoltorbsInCol",value:function(e){return this.grid.map((function(t){return t[e]})).map((function(e){return e.value})).filter((function(e){return 0===e})).length}},{key:"rowIsDead",value:function(e){return this.cellsAreDead(this.grid[e])}},{key:"colIsDead",value:function(e){return this.cellsAreDead(this.grid.map((function(t){return t[e]})))}},{key:"cellsAreDead",value:function(e){return e.filter((function(e){return 0===e.value})).length+e.map((function(e){return e.value})).reduce((function(e,t){return e+t}))-5<=e.filter((function(e){return 2===e.value&&e.flipped})).length+2*e.filter((function(e){return 3===e.value&&e.flipped})).length}},{key:"getScore",value:function(){var e=this.grid.flatMap((function(e){return e})).filter((function(e){return e.flipped}));return e.length<=0?0:e.map((function(e){return e.value})).reduce((function(e,t){return e*t}))}},{key:"getNumberOfFlippedMultipliers",value:function(){return this.grid.flatMap((function(e){return e})).filter((function(e){return e.value>0&&e.flipped})).length}}],[{key:"create",value:function(t){var n=[],r=m.find((function(e){return e.level===t})),i=w(r.cellsOptions);y(i),console.log(i);for(var l=0;l<r.size;l++){for(var c=[],o=0;o<r.size;o++){var u=i[l*r.size+o];c.push(new k(u))}n.push(c)}return new e(n)}}]),e}(),k=function(){function e(t){Object(j.a)(this,e),this.value=void 0,this.flipped=void 0,this.value=t,this.flipped=!1}return Object(p.a)(e,[{key:"flip",value:function(){this.flipped=!0}}]),e}(),w=function(e){return e[Math.floor(Math.random()*e.length)]},y=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=[e[n],e[t]];e[t]=r[0],e[n]=r[1]}},S=n(3),C=function(e){var t=e.cell,n="flip-grid-cell",i=Object(S.jsx)("span",{children:"?"}),l="cell-button";e.showDead&&(n+=" dead");var c=e.gridState!==r.Pending;return c&&(i=Object(S.jsx)("span",{children:t.value}),l+=" shown",0===t.value&&(i=Object(S.jsx)("span",{children:"V"}),l+=" voltorb")),t.flipped&&(i=Object(S.jsx)("span",{children:t.value}),l+=" flipped",0===t.value&&(i=Object(S.jsx)("span",{children:"V"}),l+=" voltorb")),Object(S.jsx)("div",{className:n,children:Object(S.jsx)(h.a,{className:l,disabled:c||t.flipped,onClick:e.flipCell,children:i})})},D=function(e){var t=e.showDeadZone?"dead":"",n=e.cells.map((function(e){return e.value})).reduce((function(e,t){return e+t})),r=e.cells.filter((function(e){return 0===e.value})).length;return Object(S.jsx)("div",{className:"flip-grid-cell",children:Object(S.jsxs)("div",{className:"stats",children:[Object(S.jsxs)("div",{children:[n,", ",r]}),t&&Object(S.jsx)("div",{children:t})]})})},z=function(e){var t,n=Object(i.useState)(!1),l=Object(u.a)(n,2),c=l[0],o=l[1],s=function(t,n,r){var i=t.getCell(n,r),l=t.getState(),o=!i.flipped&&c&&(t.rowIsDead(n)||t.colIsDead(r));return Object(S.jsx)(C,{cell:i,gridState:l,showDead:o,flipCell:function(){return e.flipCell(n,r)}})},f=function(e,t){var n=c&&e.rowIsDead(t);return Object(S.jsx)(D,{cells:e.getRow(t),showDeadZone:n})},h=function(e,t){var n=c&&e.colIsDead(t);return Object(S.jsx)(D,{cells:e.getCol(t),showDeadZone:n})};return Object(S.jsxs)("div",{className:"container",children:[(t=e.grid,Object(S.jsxs)("div",{children:[M(t.size()).map((function(e){return Object(S.jsxs)("div",{className:"flip-grid-row",children:[M(t.size()).map((function(n){return s(t,e,n)})),f(t,e)]})})),Object(S.jsx)("div",{className:"flip-grid-row",children:M(t.size()).map((function(e){return h(t,e)}))})]})),function(t){var n;return Object(S.jsxs)("div",{className:"grid-state",children:[Object(S.jsxs)("div",{children:["Level: ",e.level]}),Object(S.jsxs)("div",{children:["Streak: ",e.streak]}),Object(S.jsxs)("div",{children:["Coins: ",e.score]}),Object(S.jsxs)("div",{children:["Coins this round: ",null!==(n=null===t||void 0===t?void 0:t.getScore())&&void 0!==n?n:0]})]})}(e.grid),function(t){var n=null===t||void 0===t?void 0:t.getState();return Object(S.jsxs)("div",{className:"grid-options",children:[Object(S.jsx)(a.a,{content:"Move to the next level!",position:"bottom left",mouseEnterDelay:500,disabled:n===r.Pending,trigger:Object(S.jsx)(d.a,{disabled:n===r.Pending,onClick:function(){return e.nextLevel(t)},children:"Next Level"})}),Object(S.jsx)(a.a,{content:"Start a new game from level 1.",position:"bottom center",mouseEnterDelay:500,trigger:Object(S.jsx)(d.a,{onClick:e.reset,children:"Reset"})}),Object(S.jsx)(a.a,{content:"Highlight cells that MUST contain either 1 coin or a Voltorb, based on current information.",position:"bottom right",mouseEnterDelay:500,trigger:Object(S.jsx)(v.a,{className:"option-checkbox",label:"Show dead cells",checked:c,onChange:function(e,t){var n;return o(null!==(n=t.checked)&&void 0!==n&&n)}})})]})}(e.grid)]})},M=function(e){return Array.from(new Array(e),(function(e,t){return t}))},N=(n(399),function(e){return x.create(e)}),I=function(){var e=Object(i.useState)(1),t=Object(u.a)(e,2),n=t[0],l=t[1],c=Object(i.useState)(0),o=Object(u.a)(c,2),a=o[0],s=o[1],d=Object(i.useState)(0),f=Object(u.a)(d,2),v=f[0],h=f[1],j=Object(i.useState)(N(n)),p=Object(u.a)(j,2),g=p[0],b=p[1];return Object(S.jsx)("div",{className:"App",children:Object(S.jsxs)("header",{className:"App-header",children:[Object(S.jsx)("h1",{children:"Voltorb Flip"}),Object(S.jsx)("h4",{children:"A clone of the beloved mini-game from Pok\xe9mon HeartGold and SoulSilver."}),Object(S.jsx)(z,{level:n,streak:v,score:a,grid:g,flipCell:function(e,t){g.getCell(e,t).flip(),b(new x(g.grid))},nextLevel:function(e){var t=n,i=0,c=e.getState();if(c===r.Won&&(t=(i=v+1)>=5?8:Math.min(8,n+1),s(a+e.getScore())),c===r.Lost){var o=e.getNumberOfFlippedMultipliers();o<n&&(t=Math.max(1,Math.min(8,n,o)))}l(t),h(i),b(N(t))},reset:function(){l(1),h(0),b(N(1))}})]})})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,418)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,l=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),l(e),c(e)}))};o.a.render(Object(S.jsx)(l.a.StrictMode,{children:Object(S.jsx)(I,{})}),document.getElementById("root")),L()}},[[400,1,2]]]);
//# sourceMappingURL=main.98559d9f.chunk.js.map