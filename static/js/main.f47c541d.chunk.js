(this["webpackJsonpvoltorb-flip-demo"]=this["webpackJsonpvoltorb-flip-demo"]||[]).push([[0],{218:function(e,t,n){},399:function(e,t,n){},400:function(e,t,n){"use strict";n.r(t);var i,r=n(0),l=n.n(r),c=n(28),o=n.n(c),u=(n(218),n(56)),s=n(415),a=n(139),d=n.n(a),f=n(202),v=n.n(f),h=n(416),j=n(137),p=n(75),g=n(78),b=function(e,t){return new Array(t).fill(e)},O=function(e,t,n,i){var r=e*e-(t+n+i);return[].concat(Object(g.a)(b(0,t)),Object(g.a)(b(1,r)),Object(g.a)(b(2,n)),Object(g.a)(b(3,i)))},m=[{level:1,size:5,cellsOptions:[O(5,6,3,1),O(5,6,0,3),O(5,6,5,0),O(5,6,2,2),O(5,6,4,1)]},{level:2,size:5,cellsOptions:[O(5,7,1,3),O(5,7,6,0),O(5,7,3,2),O(5,7,0,4),O(5,7,5,1)]},{level:3,size:5,cellsOptions:[O(5,8,2,3),O(5,8,7,0),O(5,8,4,2),O(5,8,1,4),O(5,8,6,1)]},{level:4,size:5,cellsOptions:[O(5,8,3,3),O(5,8,0,5),O(5,10,8,0),O(5,10,5,2),O(5,10,2,4)]},{level:5,size:5,cellsOptions:[O(5,10,7,1),O(5,10,4,3),O(5,10,1,5),O(5,10,9,0),O(5,10,6,2)]},{level:6,size:5,cellsOptions:[O(5,10,3,4),O(5,10,0,6),O(5,10,8,1),O(5,10,5,3),O(5,10,2,5)]},{level:7,size:5,cellsOptions:[O(5,10,7,2),O(5,10,4,4),O(5,13,1,6),O(5,13,9,1),O(5,10,6,3)]},{level:8,size:5,cellsOptions:[O(5,10,0,7),O(5,10,8,2),O(5,10,5,4),O(5,10,2,6),O(5,10,7,3)]}];!function(e){e[e.Pending=0]="Pending",e[e.Won=1]="Won",e[e.Lost=2]="Lost"}(i||(i={}));var x=function(){function e(t){Object(j.a)(this,e),this.grid=void 0,this.grid=t}return Object(p.a)(e,[{key:"size",value:function(){return this.grid.length}},{key:"getState",value:function(){var e=this.grid.flatMap((function(e){return e}));return e.some((function(e){return 0===e.value&&e.flipped}))?i.Lost:e.filter((function(e){return e.value>1})).every((function(e){return e.flipped}))?i.Won:i.Pending}},{key:"getCell",value:function(e,t){return this.grid[e][t]}},{key:"getRow",value:function(e){return this.grid[e]}},{key:"getRowTotal",value:function(e){return this.getRow(e).map((function(e){return e.value})).reduce((function(e,t){return e+t}))}},{key:"getCol",value:function(e){return this.grid.map((function(t){return t[e]}))}},{key:"getColTotal",value:function(e){return this.getCol(e).map((function(e){return e.value})).reduce((function(e,t){return e+t}))}},{key:"countVoltorbsInRow",value:function(e){return this.grid[e].filter((function(e){return 0===e.value})).length}},{key:"countVoltorbsInCol",value:function(e){return this.grid.map((function(t){return t[e]})).map((function(e){return e.value})).filter((function(e){return 0===e})).length}},{key:"rowIsDead",value:function(e){return this.cellsAreDead(this.grid[e])}},{key:"colIsDead",value:function(e){return this.cellsAreDead(this.grid.map((function(t){return t[e]})))}},{key:"cellsAreDead",value:function(e){return e.filter((function(e){return 0===e.value})).length+e.map((function(e){return e.value})).reduce((function(e,t){return e+t}))-5<=e.filter((function(e){return 2===e.value&&e.flipped})).length+2*e.filter((function(e){return 3===e.value&&e.flipped})).length}},{key:"getScore",value:function(){var e=this.grid.flatMap((function(e){return e})).filter((function(e){return e.flipped}));return e.length<=0?0:e.map((function(e){return e.value})).reduce((function(e,t){return e*t}))}},{key:"getNumberOfFlippedMultipliers",value:function(){return this.grid.flatMap((function(e){return e})).filter((function(e){return e.value>0&&e.flipped})).length}}],[{key:"create",value:function(t){var n=[],i=m.find((function(e){return e.level===t})),r=y(i.cellsOptions);S(r),console.log(r);for(var l=0;l<i.size;l++){for(var c=[],o=0;o<i.size;o++){var u=r[l*i.size+o];c.push(new k(u))}n.push(c)}return new e(n)}}]),e}(),k=function(){function e(t){Object(j.a)(this,e),this.value=void 0,this.flipped=void 0,this.value=t,this.flipped=!1}return Object(p.a)(e,[{key:"flip",value:function(){this.flipped=!0}}]),e}(),y=function(e){return e[Math.floor(Math.random()*e.length)]},S=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),i=[e[n],e[t]];e[t]=i[0],e[n]=i[1]}},w=n(3),C=function(e){var t=e.cell,n="flip-grid-cell",r=Object(w.jsx)("span",{children:"?"}),l="cell-button";e.showDead&&(n+=" dead");var c=e.gridState!==i.Pending;return c&&(r=Object(w.jsx)("span",{children:t.value}),l+=" shown",0===t.value&&(r=Object(w.jsx)("span",{children:"V"}),l+=" voltorb")),t.flipped&&(r=Object(w.jsx)("span",{children:t.value}),l+=" flipped",0===t.value&&(r=Object(w.jsx)("span",{children:"V"}),l+=" voltorb")),Object(w.jsx)("div",{className:n,children:Object(w.jsx)(h.a,{className:l,disabled:c||t.flipped,onClick:e.flipCell,children:r})})},z=function(e){var t=e.cells.map((function(e){return e.value})).reduce((function(e,t){return e+t})),n=e.cells.filter((function(e){return 0===e.value})).length;return Object(w.jsx)("div",{className:"flip-grid-cell",children:Object(w.jsx)("div",{className:"stats",children:Object(w.jsxs)("div",{children:[t,", ",n]})})})},M=function(e){var t,n=Object(r.useState)(!1),l=Object(u.a)(n,2),c=l[0],o=l[1],a=function(t,n,i){var r=t.getCell(n,i),l=t.getState(),o=!r.flipped&&c&&(t.rowIsDead(n)||t.colIsDead(i));return Object(w.jsx)(C,{cell:r,gridState:l,showDead:o,flipCell:function(){return e.flipCell(n,i)}})};return Object(w.jsxs)("div",{className:"container",children:[(t=e.grid,Object(w.jsxs)("div",{children:[N(t.size()).map((function(e){return Object(w.jsxs)("div",{className:"flip-grid-row",children:[N(t.size()).map((function(n){return a(t,e,n)})),Object(w.jsx)(z,{cells:t.getRow(e)})]})})),Object(w.jsx)("div",{className:"flip-grid-row",children:N(t.size()).map((function(e){return Object(w.jsx)(z,{cells:t.getCol(e)})}))})]})),function(t){var n;return Object(w.jsxs)("div",{className:"grid-state",children:[Object(w.jsxs)("div",{style:{textAlign:"start"},children:[Object(w.jsxs)("div",{children:["Level: ",e.level]}),Object(w.jsxs)("div",{children:["Streak: ",e.streak]})]}),Object(w.jsxs)("div",{style:{textAlign:"end"},children:[Object(w.jsxs)("div",{children:["Coins: ",e.score]}),Object(w.jsxs)("div",{children:["Coins this round: ",null!==(n=null===t||void 0===t?void 0:t.getScore())&&void 0!==n?n:0]})]})]})}(e.grid),function(t){var n=null===t||void 0===t?void 0:t.getState();return Object(w.jsxs)("div",{className:"grid-options",children:[Object(w.jsx)(s.a,{content:"Move to the next level!",position:"bottom left",mouseEnterDelay:500,disabled:n===i.Pending,trigger:Object(w.jsx)(d.a,{disabled:n===i.Pending,onClick:function(){return e.nextLevel(t)},children:"Next Level"})}),Object(w.jsx)(s.a,{content:"Start a new game from level 1.",position:"bottom center",mouseEnterDelay:500,trigger:Object(w.jsx)(d.a,{onClick:e.reset,children:"Reset"})}),Object(w.jsx)(s.a,{content:"Highlight cells that MUST contain either 1 coin or a Voltorb, based on current information.",position:"bottom right",mouseEnterDelay:500,trigger:Object(w.jsx)(v.a,{className:"option-checkbox",label:"Show dead cells",checked:c,onChange:function(e,t){var n;return o(null!==(n=t.checked)&&void 0!==n&&n)}})})]})}(e.grid)]})},N=function(e){return Array.from(new Array(e),(function(e,t){return t}))},D=(n(399),function(e){return x.create(e)}),A=function(){var e=Object(r.useState)(1),t=Object(u.a)(e,2),n=t[0],l=t[1],c=Object(r.useState)(0),o=Object(u.a)(c,2),s=o[0],a=o[1],d=Object(r.useState)(0),f=Object(u.a)(d,2),v=f[0],h=f[1],j=Object(r.useState)(D(n)),p=Object(u.a)(j,2),g=p[0],b=p[1];return Object(w.jsx)("div",{className:"App",children:Object(w.jsxs)("header",{className:"App-header",children:[Object(w.jsx)("h1",{children:"Voltorb Flip"}),Object(w.jsx)("h4",{children:"A clone of the beloved mini-game from Pok\xe9mon HeartGold and SoulSilver."}),Object(w.jsx)(M,{level:n,streak:v,score:s,grid:g,flipCell:function(e,t){g.getCell(e,t).flip(),b(new x(g.grid))},nextLevel:function(e){var t=n,r=0,c=e.getState();if(c===i.Won&&(t=(r=v+1)>=5?8:Math.min(8,n+1),a(s+e.getScore())),c===i.Lost){var o=e.getNumberOfFlippedMultipliers();o<n&&(t=Math.max(1,Math.min(8,n,o)))}l(t),h(r),b(D(t))},reset:function(){l(1),h(0),b(D(1))}})]})})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,418)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,l=t.getLCP,c=t.getTTFB;n(e),i(e),r(e),l(e),c(e)}))};o.a.render(Object(w.jsx)(l.a.StrictMode,{children:Object(w.jsx)(A,{})}),document.getElementById("root")),L()}},[[400,1,2]]]);
//# sourceMappingURL=main.f47c541d.chunk.js.map