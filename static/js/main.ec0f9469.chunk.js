(this["webpackJsonpvoltorb-flip-demo"]=this["webpackJsonpvoltorb-flip-demo"]||[]).push([[0],{142:function(e,t,n){},308:function(e,t,n){},309:function(e,t,n){"use strict";n.r(t);var i,r=n(0),l=n.n(r),c=n(13),o=n.n(c),s=(n(142),n(21)),u=n(326),a=n(128),d=n.n(a),f=n(1),v=function(e){var t="pbutton";e.className&&(t+=" ".concat(e.className)),e.disabled&&(t+=" disabled");var n=e.disabled?void 0:e.onClick;return Object(f.jsx)("div",{className:t,onClick:n,children:e.children})},h=n(74),j=n(31),b=n(33),p=function(e,t){return new Array(t).fill(e)},g=function(e,t,n,i){var r=e*e-(t+n+i);return[].concat(Object(b.a)(p(0,t)),Object(b.a)(p(1,r)),Object(b.a)(p(2,n)),Object(b.a)(p(3,i)))},O=[{level:1,size:5,cellsOptions:[g(5,6,3,1),g(5,6,0,3),g(5,6,5,0),g(5,6,2,2),g(5,6,4,1)]},{level:2,size:5,cellsOptions:[g(5,7,1,3),g(5,7,6,0),g(5,7,3,2),g(5,7,0,4),g(5,7,5,1)]},{level:3,size:5,cellsOptions:[g(5,8,2,3),g(5,8,7,0),g(5,8,4,2),g(5,8,1,4),g(5,8,6,1)]},{level:4,size:5,cellsOptions:[g(5,8,3,3),g(5,8,0,5),g(5,10,8,0),g(5,10,5,2),g(5,10,2,4)]},{level:5,size:5,cellsOptions:[g(5,10,7,1),g(5,10,4,3),g(5,10,1,5),g(5,10,9,0),g(5,10,6,2)]},{level:6,size:5,cellsOptions:[g(5,10,3,4),g(5,10,0,6),g(5,10,8,1),g(5,10,5,3),g(5,10,2,5)]},{level:7,size:5,cellsOptions:[g(5,10,7,2),g(5,10,4,4),g(5,13,1,6),g(5,13,9,1),g(5,10,6,3)]},{level:8,size:5,cellsOptions:[g(5,10,0,7),g(5,10,8,2),g(5,10,5,4),g(5,10,2,6),g(5,10,7,3)]}];!function(e){e[e.Pending=0]="Pending",e[e.Won=1]="Won",e[e.Lost=2]="Lost"}(i||(i={}));var m=function(){function e(t){Object(h.a)(this,e),this.grid=void 0,this.grid=t}return Object(j.a)(e,[{key:"size",value:function(){return this.grid.length}},{key:"getState",value:function(){var e=this.grid.flatMap((function(e){return e}));return e.some((function(e){return 0===e.value&&e.flipped}))?i.Lost:e.filter((function(e){return e.value>1})).every((function(e){return e.flipped}))?i.Won:i.Pending}},{key:"getCell",value:function(e,t){return this.grid[e][t]}},{key:"getRow",value:function(e){return this.grid[e]}},{key:"getRowTotal",value:function(e){return this.getRow(e).map((function(e){return e.value})).reduce((function(e,t){return e+t}))}},{key:"getCol",value:function(e){return this.grid.map((function(t){return t[e]}))}},{key:"getColTotal",value:function(e){return this.getCol(e).map((function(e){return e.value})).reduce((function(e,t){return e+t}))}},{key:"countVoltorbsInRow",value:function(e){return this.grid[e].filter((function(e){return 0===e.value})).length}},{key:"countVoltorbsInCol",value:function(e){return this.grid.map((function(t){return t[e]})).map((function(e){return e.value})).filter((function(e){return 0===e})).length}},{key:"rowIsDead",value:function(e){return this.cellsAreDead(this.grid[e])}},{key:"colIsDead",value:function(e){return this.cellsAreDead(this.grid.map((function(t){return t[e]})))}},{key:"cellsAreDead",value:function(e){return e.filter((function(e){return 0===e.value})).length+e.map((function(e){return e.value})).reduce((function(e,t){return e+t}))-5<=e.filter((function(e){return 2===e.value&&e.flipped})).length+2*e.filter((function(e){return 3===e.value&&e.flipped})).length}},{key:"getScore",value:function(){var e=this.grid.flatMap((function(e){return e})).filter((function(e){return e.flipped}));return e.length<=0?0:e.map((function(e){return e.value})).reduce((function(e,t){return e*t}))}},{key:"getNumberOfFlippedMultipliers",value:function(){return this.grid.flatMap((function(e){return e})).filter((function(e){return e.value>0&&e.flipped})).length}}],[{key:"create",value:function(t){var n=[],i=O.find((function(e){return e.level===t})),r=k(i.cellsOptions);y(r);for(var l=0;l<i.size;l++){for(var c=[],o=0;o<i.size;o++){var s=r[l*i.size+o];c.push(new x(s))}n.push(c)}return new e(n)}}]),e}(),x=function(){function e(t){Object(h.a)(this,e),this.value=void 0,this.flipped=void 0,this.value=t,this.flipped=!1}return Object(j.a)(e,[{key:"flip",value:function(){this.flipped=!0}}]),e}(),k=function(e){return e[Math.floor(Math.random()*e.length)]},y=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),i=[e[n],e[t]];e[t]=i[0],e[n]=i[1]}},w=function(e){var t=e.cell,n="flip-grid-cell",r=Object(f.jsx)("span",{children:"?"}),l="cell-button",c="/voltorb-flip-demo/voltorb.png";return e.gridState!==i.Pending?(r=Object(f.jsx)("span",{children:t.value}),l+=" shown",0===t.value&&(r=Object(f.jsx)("img",{src:c,alt:"voltorb"}),l+=" voltorb")):e.showDead&&(n+=" dead"),t.flipped&&(r=Object(f.jsx)("span",{children:t.value}),l+=" flipped",0===t.value&&(r=Object(f.jsx)("img",{src:c,alt:"voltorb"}),l+=" voltorb")),Object(f.jsx)("div",{className:n,children:Object(f.jsx)(v,{className:l,onClick:e.flipCell,children:r})})},C=function(e){var t=e.cells.map((function(e){return e.value})).reduce((function(e,t){return e+t})),n=e.cells.filter((function(e){return 0===e.value})).length;return Object(f.jsx)("div",{className:"flip-grid-cell",children:Object(f.jsx)("div",{className:"stats",children:Object(f.jsxs)("div",{children:[t,", ",n]})})})},S=function(e){var t,n=Object(r.useState)(!1),l=Object(s.a)(n,2),c=l[0],o=l[1],a=function(t,n,i){var r=t.getCell(n,i),l=t.getState(),o=!r.flipped&&c&&(t.rowIsDead(n)||t.colIsDead(i));return Object(f.jsx)(w,{cell:r,gridState:l,showDead:o,flipCell:function(){return e.flipCell(n,i)}})};return Object(f.jsxs)("div",{className:"container",children:[(t=e.grid,Object(f.jsxs)("div",{children:[N(t.size()).map((function(e){return Object(f.jsxs)("div",{className:"flip-grid-row",children:[N(t.size()).map((function(n){return a(t,e,n)})),Object(f.jsx)(C,{cells:t.getRow(e)})]})})),Object(f.jsx)("div",{className:"flip-grid-row",children:N(t.size()).map((function(e){return Object(f.jsx)(C,{cells:t.getCol(e)})}))})]})),function(t){var n;return Object(f.jsxs)("div",{className:"grid-state",children:[Object(f.jsxs)("div",{style:{textAlign:"start"},children:[Object(f.jsxs)("div",{children:["Level: ",e.level]}),Object(f.jsxs)("div",{children:["Streak: ",e.streak]})]}),Object(f.jsxs)("div",{style:{textAlign:"end"},children:[Object(f.jsxs)("div",{children:["Coins: ",e.score]}),Object(f.jsxs)("div",{children:["Coins this round: ",null!==(n=null===t||void 0===t?void 0:t.getScore())&&void 0!==n?n:0]})]})]})}(e.grid),function(t){var n=null===t||void 0===t?void 0:t.getState();return Object(f.jsxs)("div",{className:"grid-options",children:[Object(f.jsx)(u.a,{content:"Move to the next level!",position:"bottom left",mouseEnterDelay:500,disabled:n===i.Pending,trigger:Object(f.jsx)(v,{disabled:n===i.Pending,onClick:function(){return e.nextLevel(t)},children:"Next Level"})}),Object(f.jsx)(u.a,{content:"Start a new game from level 1.",position:"bottom center",mouseEnterDelay:500,trigger:Object(f.jsx)(v,{onClick:e.reset,children:"Reset"})}),Object(f.jsx)(u.a,{content:"Highlight cells that MUST contain either 1 coin or a Voltorb, based on current information.",position:"bottom right",mouseEnterDelay:500,disabled:n!==i.Pending,trigger:Object(f.jsx)(d.a,{className:"option-checkbox",label:"Show dead cells",disabled:n!==i.Pending,checked:c,onChange:function(e,t){var n;return o(null!==(n=t.checked)&&void 0!==n&&n)}})})]})}(e.grid)]})},N=function(e){return Array.from(new Array(e),(function(e,t){return t}))},z=(n(308),function(e){return m.create(e)}),M=function(){var e=Object(r.useState)(1),t=Object(s.a)(e,2),n=t[0],l=t[1],c=Object(r.useState)(0),o=Object(s.a)(c,2),u=o[0],a=o[1],d=Object(r.useState)(0),v=Object(s.a)(d,2),h=v[0],j=v[1],b=Object(r.useState)(z(n)),p=Object(s.a)(b,2),g=p[0],O=p[1];return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsxs)("header",{className:"App-header",children:[Object(f.jsx)("h1",{children:"Voltorb Flip"}),Object(f.jsx)("h4",{children:"A clone of the beloved mini-game from Pok\xe9mon HeartGold and SoulSilver."}),Object(f.jsx)(S,{level:n,streak:h,score:u,grid:g,flipCell:function(e,t){g.getCell(e,t).flip(),O(new m(g.grid))},nextLevel:function(e){var t=n,r=0,c=e.getState();if(c===i.Won&&(t=(r=h+1)>=5?8:Math.min(8,n+1),a(u+e.getScore())),c===i.Lost){var o=e.getNumberOfFlippedMultipliers();o<n&&(t=Math.max(1,Math.min(8,n,o)))}l(t),j(r),O(z(t))},reset:function(){l(1),j(0),O(z(1))}})]}),Object(f.jsx)("footer",{children:Object(f.jsx)("a",{href:"https://www.icons101.com/icon/id_60093/setid_928/Pokemon_by_HEKTakun/100_Voltorb",title:"voltorb icon",children:"Voltorb icon created by HEKTakun - Icons101"})})]})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,327)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,l=t.getLCP,c=t.getTTFB;n(e),i(e),r(e),l(e),c(e)}))};o.a.render(Object(f.jsx)(l.a.StrictMode,{children:Object(f.jsx)(M,{})}),document.getElementById("root")),D()}},[[309,1,2]]]);
//# sourceMappingURL=main.ec0f9469.chunk.js.map