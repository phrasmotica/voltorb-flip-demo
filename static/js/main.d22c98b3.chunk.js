(this["webpackJsonpvoltorb-flip-demo"]=this["webpackJsonpvoltorb-flip-demo"]||[]).push([[0],{220:function(e,t,n){},386:function(e,t,n){},387:function(e,t,n){"use strict";n.r(t);var i,r=n(0),c=n.n(r),l=n(32),o=n.n(l),s=(n(220),n(23)),u=n(404),a=n(405),d=n(67),f=n(2),h=function(e){var t="pbutton";e.className&&(t+=" ".concat(e.className)),e.colour&&(t+=" ".concat(e.colour)),e.disabled&&(t+=" disabled");var n=e.frozen||e.disabled?void 0:e.onClick;return Object(f.jsx)("div",{className:t,onClick:n,children:e.children})},j=function(e){return Object(f.jsxs)(u.a,{onClose:function(){return e.setOpen(!1)},open:e.open,size:"mini",children:[Object(f.jsxs)(a.a,{children:[Object(f.jsx)(d.a,{name:"warning"}),"Reset"]}),Object(f.jsx)(u.a.Content,{children:Object(f.jsx)("p",{children:"Are you sure you want to reset the game? This will also clear your level, score and streak!"})}),Object(f.jsxs)(u.a.Actions,{children:[Object(f.jsxs)(h,{colour:"green",onClick:function(){e.resetGame(),e.setOpen(!1)},children:[Object(f.jsx)(d.a,{name:"checkmark"}),"Yes"]}),Object(f.jsxs)(h,{colour:"red",onClick:function(){return e.setOpen(!1)},children:[Object(f.jsx)(d.a,{name:"remove"}),"No"]})]})]})},v=n(403),b=n(204),p=n.n(b),g=n(145),O=n(74),m=n(76),x=function(e,t){return new Array(t).fill(e)},k=function(e,t,n,i){var r=e*e-(t+n+i);return[].concat(Object(m.a)(x(0,t)),Object(m.a)(x(1,r)),Object(m.a)(x(2,n)),Object(m.a)(x(3,i)))},w=[{level:1,size:5,cellsOptions:[k(5,6,3,1),k(5,6,0,3),k(5,6,5,0),k(5,6,2,2),k(5,6,4,1)]},{level:2,size:5,cellsOptions:[k(5,7,1,3),k(5,7,6,0),k(5,7,3,2),k(5,7,0,4),k(5,7,5,1)]},{level:3,size:5,cellsOptions:[k(5,8,2,3),k(5,8,7,0),k(5,8,4,2),k(5,8,1,4),k(5,8,6,1)]},{level:4,size:5,cellsOptions:[k(5,8,3,3),k(5,8,0,5),k(5,10,8,0),k(5,10,5,2),k(5,10,2,4)]},{level:5,size:5,cellsOptions:[k(5,10,7,1),k(5,10,4,3),k(5,10,1,5),k(5,10,9,0),k(5,10,6,2)]},{level:6,size:5,cellsOptions:[k(5,10,3,4),k(5,10,0,6),k(5,10,8,1),k(5,10,5,3),k(5,10,2,5)]},{level:7,size:5,cellsOptions:[k(5,10,7,2),k(5,10,4,4),k(5,13,1,6),k(5,13,9,1),k(5,10,6,3)]},{level:8,size:5,cellsOptions:[k(5,10,0,7),k(5,10,8,2),k(5,10,5,4),k(5,10,2,6),k(5,10,7,3)]}];!function(e){e[e.Pending=0]="Pending",e[e.Won=1]="Won",e[e.Lost=2]="Lost"}(i||(i={}));var y=function(){function e(t){Object(g.a)(this,e),this.grid=void 0,this.grid=t}return Object(O.a)(e,[{key:"size",value:function(){return this.grid.length}},{key:"getState",value:function(){var e=this.grid.flatMap((function(e){return e}));return e.some((function(e){return 0===e.value&&e.flipped}))?i.Lost:e.filter((function(e){return e.value>1})).every((function(e){return e.flipped}))?i.Won:i.Pending}},{key:"getCell",value:function(e,t){return this.grid[e][t]}},{key:"getRow",value:function(e){return this.grid[e]}},{key:"getRowTotal",value:function(e){return this.getRow(e).map((function(e){return e.value})).reduce((function(e,t){return e+t}))}},{key:"getCol",value:function(e){return this.grid.map((function(t){return t[e]}))}},{key:"getColTotal",value:function(e){return this.getCol(e).map((function(e){return e.value})).reduce((function(e,t){return e+t}))}},{key:"countVoltorbsInRow",value:function(e){return this.grid[e].filter((function(e){return 0===e.value})).length}},{key:"countVoltorbsInCol",value:function(e){return this.grid.map((function(t){return t[e]})).map((function(e){return e.value})).filter((function(e){return 0===e})).length}},{key:"rowIsDead",value:function(e){return this.cellsAreDead(this.grid[e])}},{key:"colIsDead",value:function(e){return this.cellsAreDead(this.grid.map((function(t){return t[e]})))}},{key:"cellsAreDead",value:function(e){return e.filter((function(e){return 0===e.value})).length+e.map((function(e){return e.value})).reduce((function(e,t){return e+t}))-5<=e.filter((function(e){return 2===e.value&&e.flipped})).length+2*e.filter((function(e){return 3===e.value&&e.flipped})).length}},{key:"getScore",value:function(){var e=this.grid.flatMap((function(e){return e})).filter((function(e){return e.flipped}));return e.length<=0?0:e.map((function(e){return e.value})).reduce((function(e,t){return e*t}))}},{key:"getFlippedMultipliers",value:function(){return this.grid.flatMap((function(e){return e})).filter((function(e){return e.value>0&&e.flipped}))}},{key:"computeHints",value:function(){var e=this,t=[],n=0;return this.grid.forEach((function(t,i){t.forEach((function(t,r){if(!t.flipped){var c=e.computeMeanScore(i,r);n=Math.max(n,c)}}))})),this.grid.forEach((function(i,r){i.forEach((function(i,c){i.flipped||e.computeMeanScore(r,c)===n&&t.push([r,c])}))})),t}},{key:"computeMeanScore",value:function(e,t){var n=this.countVoltorbsInRow(e),i=this.countVoltorbsInCol(t);return 0===n||0===i?100:this.getRowTotal(e)/n*(this.getColTotal(t)/i)}}],[{key:"create",value:function(t){var n=[],i=w.find((function(e){return e.level===t})),r=S(i.cellsOptions);M(r);for(var c=0;c<i.size;c++){for(var l=[],o=0;o<i.size;o++){var s=r[c*i.size+o];l.push(new C(s))}n.push(l)}return new e(n)}}]),e}(),C=function(){function e(t){Object(g.a)(this,e),this.value=void 0,this.flipped=void 0,this.value=t,this.flipped=!1}return Object(O.a)(e,[{key:"flip",value:function(){this.flipped=!0}}]),e}(),S=function(e){return e[Math.floor(Math.random()*e.length)]},M=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),i=[e[n],e[t]];e[t]=i[0],e[n]=i[1]}},N=function(e){var t=Object(r.useState)(!1),n=Object(s.a)(t,2),c=n[0],l=n[1];Object(r.useEffect)((function(){l(e.showHighlighted)}),[e.showHighlighted]);var o=e.cell,u="flip-grid-cell",a=Object(f.jsx)("span",{children:"?"}),d="cell-button",j="/voltorb-flip-demo/voltorb.png",v=e.gridState!==i.Pending;return o.flipped?(a=Object(f.jsx)("span",{children:o.value}),d+=" flipped",0===o.value&&(a=Object(f.jsx)("img",{src:j,alt:"voltorb"}))):c?d+=" highlighted":v?(a=Object(f.jsx)("span",{children:o.value}),d+=" shown",0===o.value&&(a=Object(f.jsx)("img",{src:j,alt:"voltorb"}))):e.showDead&&(u+=" dead"),Object(f.jsx)("div",{className:u,children:Object(f.jsx)(h,{className:d,frozen:v||o.flipped,onClick:e.flipCell,children:a})})},z=function(e){var t=e.cells.map((function(e){return e.value})).reduce((function(e,t){return e+t})),n=e.cells.filter((function(e){return 0===e.value})).length;return Object(f.jsx)("div",{className:"flip-grid-cell",children:Object(f.jsxs)("div",{className:"stats",children:[Object(f.jsx)("div",{className:"total-indicator",children:t}),Object(f.jsxs)("div",{className:"voltorb-indicator",children:[Object(f.jsx)("div",{children:n}),Object(f.jsx)("img",{src:"/voltorb-flip-demo/voltorb.png",alt:"voltorb"})]})]})})},P=function(e){var t=Object(r.useState)([]),n=Object(s.a)(t,2),c=n[0],l=n[1],o=Object(r.useState)(!1),u=Object(s.a)(o,2),a=u[0],d=u[1];Object(r.useEffect)((function(){e.grid.getState()!==i.Pending&&l([])}),[e.grid]);var j,b=function(t,n,i){var r=t.getCell(n,i),l=t.getState(),o=c.some((function(e){return e[0]===n&&e[1]===i})),s=!r.flipped&&a&&(t.rowIsDead(n)||t.colIsDead(i));return Object(f.jsx)(N,{cell:r,gridState:l,showHighlighted:o,showDead:s,flipCell:function(){return e.flipCell(n,i)}})},g=function(e){var t=e.getFlippedMultipliers().filter((function(e){return e.value>1}));return 0===t.length?"0":1===t.length?"".concat(t[0].value):t.map((function(e){return e.value})).join(" x ")+" = "+e.getScore()},O=function(t){l([]),e.nextLevel(t)},m=function(){l([]),e.reset()},x=function(e){var t=e.computeHints();l(t)};return Object(f.jsxs)("div",{className:"container",children:[(j=e.grid,Object(f.jsxs)("div",{children:[D(j.size()).map((function(e){return Object(f.jsxs)("div",{className:"flip-grid-row",children:[D(j.size()).map((function(t){return b(j,e,t)})),Object(f.jsx)(z,{cells:j.getRow(e)})]})})),Object(f.jsx)("div",{className:"flip-grid-row",children:D(j.size()).map((function(e){return Object(f.jsx)(z,{cells:j.getCol(e)})}))})]})),function(t){return Object(f.jsxs)("div",{className:"grid-state",children:[Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{children:["Level: ",e.level]}),Object(f.jsxs)("div",{children:["Streak: ",e.streak]})]}),Object(f.jsxs)("div",{children:[Object(f.jsxs)("div",{children:["Total coins: ",e.score]}),Object(f.jsxs)("div",{children:["Coins this round: ",g(t)]})]})]})}(e.grid),function(e){var t=null===e||void 0===e?void 0:e.getState();return Object(f.jsxs)("div",{className:"grid-options",children:[Object(f.jsx)(v.a,{content:"Move to the next level!",position:"top left",mouseEnterDelay:500,disabled:t===i.Pending,trigger:Object(f.jsx)(h,{disabled:t===i.Pending,onClick:function(){return O(e)},children:"Next Level"})}),Object(f.jsx)(h,{onClick:m,children:"Reset"}),Object(f.jsx)(v.a,{content:"Recommends a tile to flip.",position:"top center",mouseEnterDelay:500,disabled:t!==i.Pending,trigger:Object(f.jsx)(h,{disabled:t!==i.Pending||c.length>0,onClick:function(){return x(e)},children:"Show Hint"})}),Object(f.jsx)(v.a,{content:"Highlight cells that MUST contain either 1 coin or a Voltorb, based on current information.",position:"top right",mouseEnterDelay:500,disabled:t!==i.Pending,trigger:Object(f.jsx)(p.a,{className:"option-checkbox",label:"Show dead cells",disabled:t!==i.Pending,checked:a,onChange:function(e,t){var n;return d(null!==(n=t.checked)&&void 0!==n&&n)}})})]})}(e.grid)]})},D=function(e){return Array.from(new Array(e),(function(e,t){return t}))},E=(n(386),function(e){return y.create(e)}),A=function(){var e=Object(r.useState)(1),t=Object(s.a)(e,2),n=t[0],c=t[1],l=Object(r.useState)(0),o=Object(s.a)(l,2),u=o[0],a=o[1],d=Object(r.useState)(0),h=Object(s.a)(d,2),v=h[0],b=h[1],p=Object(r.useState)(E(n)),g=Object(s.a)(p,2),O=g[0],m=g[1],x=Object(r.useState)(!1),k=Object(s.a)(x,2),w=k[0],C=k[1];return Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(j,{open:w,setOpen:C,resetGame:function(){c(1),a(0),b(0),m(E(1))}}),Object(f.jsxs)("header",{className:"App-header",children:[Object(f.jsx)("h1",{children:"Voltorb Flip"}),Object(f.jsx)("h4",{children:"A clone of the beloved mini-game from Pok\xe9mon HeartGold and SoulSilver."}),Object(f.jsx)(P,{level:n,streak:v,score:u,grid:O,flipCell:function(e,t){O.getCell(e,t).flip(),m(new y(O.grid))},nextLevel:function(e){var t=n,r=0,l=e.getState();if(l===i.Won&&(t=(r=v+1)>=5?8:Math.min(8,n+1),a(u+e.getScore())),l===i.Lost){var o=e.getFlippedMultipliers().length;o<n&&(t=Math.max(1,Math.min(8,n,o)))}c(t),b(r),m(E(t))},reset:function(){return C(!0)}})]}),Object(f.jsx)("footer",{children:Object(f.jsx)("a",{href:"https://www.icons101.com/icon/id_60093/setid_928/Pokemon_by_HEKTakun/100_Voltorb",title:"voltorb icon",children:"Voltorb icon created by HEKTakun - Icons101"})})]})},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,407)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,c=t.getLCP,l=t.getTTFB;n(e),i(e),r(e),c(e),l(e)}))};o.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(A,{})}),document.getElementById("root")),I()}},[[387,1,2]]]);
//# sourceMappingURL=main.d22c98b3.chunk.js.map