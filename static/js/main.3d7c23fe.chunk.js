(this["webpackJsonpvoltorb-flip-demo"]=this["webpackJsonpvoltorb-flip-demo"]||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var r,i=n(1),l=n.n(i),c=n(9),u=n.n(c),o=(n(14),n(2)),s=n(7),a=n(8),d=n(4),f=function(e,t){return new Array(t).fill(e)},v=function(e,t,n,r){var i=e*e-(t+n+r);return[].concat(Object(d.a)(f(0,t)),Object(d.a)(f(1,i)),Object(d.a)(f(2,n)),Object(d.a)(f(3,r)))},h=[{level:1,size:5,cellsOptions:[v(5,6,3,1),v(5,6,0,3),v(5,6,5,0),v(5,6,2,2),v(5,6,4,1)]},{level:2,size:5,cellsOptions:[v(5,7,1,3),v(5,7,6,0),v(5,7,3,2),v(5,7,0,4),v(5,7,5,1)]},{level:3,size:5,cellsOptions:[v(5,8,2,3),v(5,8,7,0),v(5,8,4,2),v(5,8,1,4),v(5,8,6,1)]},{level:4,size:5,cellsOptions:[v(5,8,3,3),v(5,8,0,5),v(5,10,8,0),v(5,10,5,2),v(5,10,2,4)]},{level:5,size:5,cellsOptions:[v(5,10,7,1),v(5,10,4,3),v(5,10,1,5),v(5,10,9,0),v(5,10,6,2)]},{level:6,size:5,cellsOptions:[v(5,10,3,4),v(5,10,0,6),v(5,10,8,1),v(5,10,5,3),v(5,10,2,5)]},{level:7,size:5,cellsOptions:[v(5,10,7,2),v(5,10,4,4),v(5,13,1,6),v(5,13,9,1),v(5,10,6,3)]},{level:8,size:5,cellsOptions:[v(5,10,0,7),v(5,10,8,2),v(5,10,5,4),v(5,10,2,6),v(5,10,7,3)]}];!function(e){e[e.Pending=0]="Pending",e[e.Won=1]="Won",e[e.Lost=2]="Lost"}(r||(r={}));var j=function(){function e(t){Object(s.a)(this,e),this.grid=void 0,this.grid=t}return Object(a.a)(e,[{key:"size",value:function(){return this.grid.length}},{key:"getState",value:function(){var e=this.grid.flatMap((function(e){return e}));return e.some((function(e){return 0===e.value&&e.flipped}))?r.Lost:e.filter((function(e){return e.value>1})).every((function(e){return e.flipped}))?r.Won:r.Pending}},{key:"getCell",value:function(e,t){return this.grid[e][t]}},{key:"getRow",value:function(e){return this.grid[e]}},{key:"getRowTotal",value:function(e){return this.getRow(e).map((function(e){return e.value})).reduce((function(e,t){return e+t}))}},{key:"getCol",value:function(e){return this.grid.map((function(t){return t[e]}))}},{key:"getColTotal",value:function(e){return this.getCol(e).map((function(e){return e.value})).reduce((function(e,t){return e+t}))}},{key:"countVoltorbsInRow",value:function(e){return this.grid[e].filter((function(e){return 0===e.value})).length}},{key:"countVoltorbsInCol",value:function(e){return this.grid.map((function(t){return t[e]})).map((function(e){return e.value})).filter((function(e){return 0===e})).length}},{key:"rowIsDead",value:function(e){return this.cellsAreDead(this.grid[e])}},{key:"colIsDead",value:function(e){return this.cellsAreDead(this.grid.map((function(t){return t[e]})))}},{key:"cellsAreDead",value:function(e){return e.filter((function(e){return 0===e.value})).length+e.map((function(e){return e.value})).reduce((function(e,t){return e+t}))-5<=e.filter((function(e){return 2===e.value&&e.flipped})).length+2*e.filter((function(e){return 3===e.value&&e.flipped})).length}},{key:"getScore",value:function(){var e=this.grid.flatMap((function(e){return e})).filter((function(e){return e.flipped}));return e.length<=0?0:e.map((function(e){return e.value})).reduce((function(e,t){return e*t}))}},{key:"getNumberOfFlippedMultipliers",value:function(){return this.grid.flatMap((function(e){return e})).filter((function(e){return e.value>0&&e.flipped})).length}}],[{key:"create",value:function(t){var n=[],r=h.find((function(e){return e.level===t})),i=b(r.cellsOptions);g(i),console.log(i);for(var l=0;l<r.size;l++){for(var c=[],u=0;u<r.size;u++){var o=i[l*r.size+u];c.push(new p(o))}n.push(c)}return new e(n)}}]),e}(),p=function(){function e(t){Object(s.a)(this,e),this.value=void 0,this.flipped=void 0,this.value=t,this.flipped=!1}return Object(a.a)(e,[{key:"flip",value:function(){this.flipped=!0}}]),e}(),b=function(e){return e[Math.floor(Math.random()*e.length)]},g=function(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=[e[n],e[t]];e[t]=r[0],e[n]=r[1]}},O=n(0),x=function(e){var t=e.cell,n="flip-grid-cell",i=Object(O.jsx)("span",{children:"?"}),l="cell-button";return e.showDead&&(n+=" dead"),e.gridState!==r.Pending&&(i=Object(O.jsx)("span",{children:t.value}),l+=" shown",0===t.value&&(i=Object(O.jsx)("span",{children:"V"}),l+=" voltorb")),t.flipped&&(i=Object(O.jsx)("span",{children:t.value}),l+=" flipped",0===t.value&&(i=Object(O.jsx)("span",{children:"V"}),l+=" voltorb")),Object(O.jsx)("div",{className:n,children:Object(O.jsx)("button",{className:l,onClick:e.flipCell,children:i})})},m=function(e){var t=e.showDeadZone?"dead":"",n=e.cells.map((function(e){return e.value})).reduce((function(e,t){return e+t})),r=e.cells.filter((function(e){return 0===e.value})).length;return Object(O.jsxs)("div",{className:"stats",children:[Object(O.jsxs)("div",{children:[n,", ",r]}),Object(O.jsx)("div",{children:t})]})},k=function(e){var t,n=Object(i.useState)(!1),l=Object(o.a)(n,2),c=l[0],u=l[1],s=function(t,n,r){var i=t.getCell(n,r),l=t.getState(),u=!i.flipped&&c&&(t.rowIsDead(n)||t.colIsDead(r));return Object(O.jsx)(x,{cell:i,gridState:l,showDead:u,flipCell:function(){return e.flipCell(n,r)}})},a=function(e,t){var n=c&&e.rowIsDead(t);return Object(O.jsx)(m,{cells:e.getRow(t),showDeadZone:n})},d=function(e,t){var n=c&&e.colIsDead(t);return Object(O.jsx)(m,{cells:e.getCol(t),showDeadZone:n})};return Object(O.jsxs)("div",{children:[(t=e.grid,Object(O.jsxs)("div",{children:[w(t.size()).map((function(e){return Object(O.jsxs)("div",{className:"flip-grid-row",children:[w(t.size()).map((function(n){return s(t,e,n)})),a(t,e)]})})),Object(O.jsx)("div",{className:"flip-grid-row",children:w(t.size()).map((function(e){return d(t,e)}))})]})),function(t){var n;return Object(O.jsxs)("div",{className:"grid-state",children:[Object(O.jsxs)("div",{children:["Level: ",e.level]}),Object(O.jsxs)("div",{children:["Streak: ",e.streak]}),Object(O.jsxs)("div",{children:["Coins: ",e.score]}),Object(O.jsxs)("div",{children:["Coins this round: ",null!==(n=null===t||void 0===t?void 0:t.getScore())&&void 0!==n?n:0]})]})}(e.grid),function(t){var n=null===t||void 0===t?void 0:t.getState();return Object(O.jsxs)("div",{className:"grid-options",children:[Object(O.jsx)("div",{children:Object(O.jsx)("button",{disabled:n===r.Pending,onClick:function(){return e.nextLevel(t)},children:"Next Level"})}),Object(O.jsx)("div",{children:Object(O.jsx)("button",{onClick:e.reset,children:"Reset"})}),Object(O.jsx)("div",{children:Object(O.jsxs)("label",{children:[Object(O.jsx)("input",{type:"checkbox",onChange:function(e){return u(e.target.checked)}}),"Show dead zones"]})})]})}(e.grid)]})},w=function(e){return Array.from(new Array(e),(function(e,t){return t}))},y=(n(16),function(e){return j.create(e)}),C=function(){var e=Object(i.useState)(1),t=Object(o.a)(e,2),n=t[0],l=t[1],c=Object(i.useState)(0),u=Object(o.a)(c,2),s=u[0],a=u[1],d=Object(i.useState)(0),f=Object(o.a)(d,2),v=f[0],h=f[1],p=Object(i.useState)(y(n)),b=Object(o.a)(p,2),g=b[0],x=b[1];return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)("header",{className:"App-header",children:Object(O.jsx)(k,{level:n,streak:v,score:s,grid:g,flipCell:function(e,t){g.getCell(e,t).flip(),x(new j(g.grid))},nextLevel:function(e){var t=n,i=0,c=e.getState();if(c===r.Won&&(t=(i=v+1)>=5?8:Math.min(8,n+1),a(s+e.getScore())),c===r.Lost){var u=e.getNumberOfFlippedMultipliers();u<n&&(t=Math.max(1,Math.min(8,n,u)))}l(t),h(i),x(y(t))},reset:function(){l(1),h(0),x(y(1))}})})})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,l=t.getLCP,c=t.getTTFB;n(e),r(e),i(e),l(e),c(e)}))};u.a.render(Object(O.jsx)(l.a.StrictMode,{children:Object(O.jsx)(C,{})}),document.getElementById("root")),S()}},[[17,1,2]]]);
//# sourceMappingURL=main.3d7c23fe.chunk.js.map